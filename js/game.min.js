function initialize(){$("#rejouer").css("visibility","hidden"),stage=new createjs.Stage("canvas"),stage.enableMouseOver(30);for(var a=[],b=1;b<=17;b++)a.push(0);for(var c=!1,d=0,b=0;b<8;b++){for(;!c;)d=Math.floor(17*Math.random())+1,0==a[d]&&(a[d]=1,c=!0);images_to_use.push(d),images_to_use.push(d),c=!1}shuffle(images_to_use);for(var b=0;b<4;b++)for(var e=0;e<4;e++){var f=createBitmap("img/unicef"+images_to_use[4*b+e]+".png",150*b,150*e);stage.addChild(f)}for(var b=0;b<4;b++)for(var e=0;e<4;e++){var f=createBitmap("img/unicef.png",150*b,150*e);f.num=4*b+e,unicefs.push(f),stage.addChild(f)}}function startTimer(a){var c,d,b=0;intervalId=setInterval(function(){c=parseInt(b/60,10),d=parseInt(b%60,10),c=c<10?"0"+c:c,d=d<10?"0"+d:d,time=c+":"+d,a.text(time),b++},1e3)}function start_game(){$("#jouer").css("visibility","hidden"),jQuery(function(a){var b=a("#time");startTimer(b)});var a=createBitmap("img/27.jpg",0,0),b=0,c=!1,d=null,e=0,f=0;$("#nbr_coup").text(f),unicefs.forEach(function(g){g.addEventListener("click",function(){c||g.clicked||(g.clicked=!0,b++,2==b&&(c=!0),createjs.Tween.get(g).to({scaleY:.5},300).to({alpha:0,scaleY:0},300).call(function(){null==d?(d=g,g.clicked=!1):(f++,$("#nbr_coup").text(f),images_to_use[d.num]==images_to_use[g.num]?(d.visible=!1,g.visible=!1,b=0,c=!1,d=null,g.clicked=!1,e++,1==e&&(stage.addChild(a),a.alpha=0,createjs.Tween.get(a).wait(100).set({alpha:0}).to({alpha:1},500).call(function(){$("#rejouer").css("visibility","visible")}),clearInterval(intervalId))):createjs.Tween.get(g).to({alpha:1,scaleY:.5},300).to({scaleY:1},300).call(function(){b=0,c=!1,createjs.Tween.get(d).to({alpha:1,scaleY:.5},300).to({scaleY:1},300),d=null,g.clicked=!1}))}))})})}!function(){var a=createjs.Graphics,b=createjs.Shape;EaselJsUtils=function(c){this.stage=c,this.createRoundRect=function(c,d,e,f,g,h){var i=new a,j=1,k=90;h&&(h.opacity&&(j=h.opacity),h.radius&&(k=h.radius)),i.beginFill(a.getRGB(g[0],g[1],g[2],j)),i.drawRoundRect(c,d,e,f,k);var l=new b(i);return this.stage.addChild(l),l},this.createCircle=function(c,d,e,f,g){var h=new a,i=1;g&&g.opacity&&(i=g.opacity),h.beginFill(a.getRGB(f[0],f[1],f[2],i)),h.drawCircle(c,d,e);var j=new b(h);return this.stage.addChild(j),j},this.createBitmap=function(a,b,c,d){var e=new createjs.Bitmap(a);return e.x=b,e.y=c,d&&d.scale&&(e.scaleX=d.scale[0],e.scaleY=d.scale[1]),this.stage.addChild(e),e},this.createPig=function(a,b,c){return this.createBitmap("img/cou.png",a,b,c)},this.createGrassBlock=function(a,b,c){return this.createBitmap("img/Grass Block.png",a,b,c)},this.createShortTree=function(a,b,c){return this.createBitmap("img/Tree Short.png",a,b,c)},this.createTallTree=function(a,b,c){return this.createBitmap("img/Tree Tall.png",a,b,c)},this.createRock=function(a,b,c){return this.createBitmap("img/Rock.png",a,b,c)},this.createCloud=function(a,b,c){return this.createBitmap("img/cloud.png",a,b,c)},this.createText=function(a,b,c,d,e){var f=new createjs.Text;return f.font=b,f.text=a,f.x=c,f.y=d,e&&(e.color&&(f.color=e.color),e.textAlign&&(f.textAlign=e.textAlign),e.cursor&&(f.cursor=e.cursor)),this.stage.addChild(f),f}},EaselJsUtils.prototype={}}();var Graphics=createjs.Graphics,Shape=createjs.Shape,stage,unicefs=[],images_to_use=[],time="",intervalId;$(document).ready(function(){initialize(),startTicker(30,stage),$("#jouer button").click(function(){start_game()}),$("#rejouer button").click(function(){$("#rejouer").css("visibility","hidden"),initialize(),startTicker(30,stage),start_game()})});